const express=require("express");
const router=express.Router();
const checkAdminAuth=require("../middleware/auth");
const userHistoryModel= require('../models/userHistory');
const { route } = require("./payment");
router.post('/',checkAdminAuth,async(req,res)=>{
    try
    {

        const data= new userHistoryModel(req.body);
        const savedData= await data.save();
        res.send(savedData);
    }
    catch(e)
    {
        res.status(500).send(e);
        console.log(e);
    }

});
router.get('/',checkAdminAuth,async(req,res)=>{
    try
    {
    const fetchData= await userHistoryModel.find();
    res.send(fetchData);
    }
    catch(e)
    {
        res.send(e);
            console.log(e);
    }

});
router.get("/search/:id",checkAdminAuth,async(req,res)=>{
    try
    {
    const _id=req.params.id;
    const data=await userHistoryModel.find({userId:_id});
    res.send(data);
    console.log(data);
    }
    catch(e)
    {
        res.status(500).send(e);
        console.log(e);
    }
})
module.exports=router;
